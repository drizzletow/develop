# 一 正则表达式

正则表达式（Regular Expression）又称正规表示法、常规表示法，在代码中常简写为 regex、regexp 或 RE

正则表达式定义了字符串的模式、可以用来搜索、编辑或处理文本。

<br>

## 1. Java regex

java.util.regex 包下主要包括以下三个与正则表达式相关的类：

- **Pattern** 类：

  pattern 对象是一个正则表达式的编译表示。

  Pattern 类没有公共构造方法。要创建一个 Pattern 对象，必须首先调用其公共静态编译方法，它返回一个 Pattern 对象。

  <br>

- **Matcher** 类：

  Matcher 对象是对输入字符串进行解释和匹配操作的引擎。

  与Pattern 类一样，Matcher 也没有公共构造方法。需要调用 Pattern 对象的 matcher 方法来获得一个 Matcher 对象。

  <br>

- **PatternSyntaxException**：

  PatternSyntaxException 是一个非强制异常类，它表示一个正则表达式模式中的语法错误。

<br>

```java

// java中正则表达式的简单使用示例

@Test
public void testMatches(){

    String content = "lksdfldsfldsjavafhlsdkjfdlsf";

    String pattern = ".*java.*";

    boolean isMatch = Pattern.matches(pattern, content);

    System.out.println(isMatch);  // true
}

```



<br>



## 2. 表达式语法

在其他语言中，`\\` 表示：**在正则表达式中插入一个普通的（字面上的）反斜杠，没有任何特殊的意义** 

在 Java 中，`\\`  表示：**插入一个正则表达式的反斜线，所以其后的字符具有特殊的意义**。

所以，在其他的语言中（如 Perl），一个反斜杠 `\` 就足以具有转义的作用，而在 Java 中正则表达式中则需要有两个反斜杠才能被解析为其他语言中的转义作用。也可以简单的理解在 Java 的正则表达式中，两个 `\\*` 代表其他语言中的一个 `\` 

如：Java中表示一位数字的正则表达式是 `\\d`， 而表示一个普通的反斜杠是 `\\`。







Java中与正则表达式相关的几个特殊的方法：

- `boolean matches(String regex)`：判断该字符串是否匹配指定的正则表达式。
- `String replaceAll(String regex, String replacement)`：将该字符串中所有匹配 regex 的子串替换成 replacement。
- `String replaceFirst(String regex, String replacement)`：将该字符串中第一个匹配 regex 的子串替换成 replacement。
- `String[] split(String regex)`：以 regex 作为分隔符，把该字符串分割成多个子串。











1. 正则表达式所支持的合法字符

   | 字符   | 解释                                                         |
   | ------ | ------------------------------------------------------------ |
   | X      | 字符x（x 可代表任何合法的字符)                               |
   | \0mnn  | 八进制数 0mnn 所表示的字符                                   |
   | \xhh   | 十六进制值 0xhh 所表示的字符                                 |
   | \uhhhh | 十六进制值 0xhhhh 所表示的 Unicode  字符                     |
   | \t     | 制表符（“\u0009”）                                           |
   | \n     | 新行（换行）符（‘\u000A’）                                   |
   | \r     | 回车符（‘\u000D’)                                            |
   | \f     | 换页符（‘\u000C’）                                           |
   | \a     | 报警（bell）符（‘\u0007’）                                   |
   | \e     | Escape 符（‘\u001B’）                                        |
   | \cx    | x 对应的的控制符。例如，\cM匹配 Ctrl-M。x 值必须为 A~Z 或 a~z 之一。 |



2. 正则表达式中的特殊字符

   | 特殊字符 | 说明                                                         |
   | -------- | ------------------------------------------------------------ |
   | $        | 匹配一行的结尾。要匹配 $ 字符本身，请使用`\$`                |
   | ^        | 匹配一行的开头。要匹配 ^ 字符本身，请使用`\^`                |
   | ()       | 标记子表达式的开始和结束位置。要匹配这些字符，请使用`\(`和`\)` |
   | []       | 用于确定中括号表达式的开始和结束位置。要匹配这些字符，请使用`\[` 和 `\]` |
   | {}       | 用于标记前面子表达式的出现频度。要匹配这些字符，请使用`\{`和`\}` |
   | *        | 指定前面子表达式可以出现零次或多次。要匹配 *  字符本身，请使用`\*` |
   | +        | 指定前面子表达式可以出现一次或多次。要匹配 + 字符本身，请使用`\+` |
   | ?        | 指定前面子表达式可以出现零次或一次。要匹配  ？字符本身，请使用`\?` |
   | .        | 匹配除换行符`\n`之外的任何单字符。要匹配 . 字符本身，请使用`\.` |
   | \        | 用于转义下一个字符，或指定八进制、十六进制字符。如果需匹配`\`字符，请用`\\` |
   | \|       | 指定两项之间任选一项。如果要匹配`丨`字符本身，请使用`\|`     |



3. 预定义字符

   | 预定义字符 | 说明                                                         |
   | ---------- | ------------------------------------------------------------ |
   | .          | 可以匹配任何字符                                             |
   | \d         | 匹配 0~9 的所有数字 (d 是 digit 的意思，代表数字)            |
   | \D         | 匹配非数字                                                   |
   | \s         | 匹配所有的空白字符，包括空格、制表符、回车符、换页符、换行符等 (s 是 space 的意思，代表空白) |
   | \S         | 匹配所有的非空白字符                                         |
   | \w         | 匹配所有的单词字符，包括 0~9 所有数字、26  个英文字母和下画线_ (w 是 word 的意思，代表单词) |
   | \W         | 匹配所有的非单词字符                                         |



4. 方括号表达式

   | 方括号表达式 | 说明                                                         |
   | ------------ | ------------------------------------------------------------ |
   | 枚举         | 例如`[abc]`表示` a、b、c` 其中任意一个字符；`[gz]`表示` g、z `其中任意一个字符 |
   | 范围         | 例如`[a-f]`表示` a~f `范围内的任意字符；`[\\u0041-\\u0056]`表示十六进制字符 `\u0041 到 \u0056`  范围的字符。范围可以和枚举结合使用，如`[a-cx-z]`，表示 `a~c、x~z`范围内的任意字符 |
   | 求否         | 例如`[^abc]`表示`非 a、b、c` 的任意字符；`[^a-f]`表示`不是 a~f` 范围内的任意字符 |
   | 与运算       | 例如` [a-z&&[def]]`是  `a~z 和 [def] `的交集，表示 `d、e、f[a-z&&^bc]]`是` a~z `范围内的所有字符，除` b 和 c `之外               `[ad-z] [a-z&&[m-p]]`是` a~z `范围内的所有字符，除 `m~p` 范围之外的字符 |
   | 并运算       | 并运算与前面的枚举类似。例如`[a-d[m-p]]`表示` [a-dm-p]`      |



5. 边界匹配符

   | 边界匹配符 | 说明                           |
   | ---------- | ------------------------------ |
   | ^          | 行的开头                       |
   | $          | 行的结尾                       |
   | \b         | 单词的边界                     |
   | \B         | 非单词的边界                   |
   | \A         | 输入的开头                     |
   | \G         | 前一个匹配的结尾               |
   | \Z         | 输入的结尾，仅用于最后的结束符 |
   | \z         | 输入的结尾                     |



6. 三种模式的数量表示符

   - Greedy（贪婪模式）：数量表示符默认采用贪婪模式，除非另有表示。贪婪模式的表达式会一直匹配下去，直到无法匹配为止。如果你发现表达式匹配的结果与预期的不符，很有可能是因为你以为表达式只会匹配前面几个字符，而实际上它是贪婪模式，所以会一直匹配下去。
   - Reluctant（勉强模式）：用问号后缀（?）表示，它只会匹配最少的字符。也称为最小匹配模式。
   - Possessive（占有模式）：用加号后缀（+）表示，目前只有 Java 支持占有模式，通常比较少用。

   | 贪婪模式 | 勉强模式 | 占用模式 | 说明                                |
   | -------- | -------- | -------- | ----------------------------------- |
   | X?       | X??      | X?+      | X表达式出现零次或一次               |
   | X*       | X*?      | X*+      | X表达式出现零次或多次               |
   | X+       | X+?      | X++      | X表达式出现一次或多次               |
   | X{n}     | X{n}?    | X{n}+    | X表达式出现 n 次                    |
   | X{n,}    | X{n,}?   | X{n,}+   | X表达式最少出现 n 次                |
   | X{n,m}   | X{n,m}?  | X{n,m}+  | X表达式最少出现 n 次，最多出现 m 次 |

